<div class="voice-booking-container">
  <!-- iPhone-style container -->
  <div class="iphone-container">
    <!-- Status bar -->
    <div class="status-bar">
      <span class="time">{{ currentTime() }}</span>
      <div class="status-icons">
        <span class="material-symbols-outlined">signal_cellular_alt</span>
        <span class="material-symbols-outlined">wifi</span>
        <span class="material-symbols-outlined">battery_full</span>
      </div>
    </div>

    <!-- Header -->
    <div class="header">
      <button class="back-button" (click)="goBack()">
        <span class="material-symbols-outlined">arrow_back</span>
        <span>Volver a Agentes</span>
      </button>
    </div>

    <!-- Agent Avatar -->
    <div class="agent-avatar-container">
      <div class="avatar-wrapper" [class.pulsing]="isPlayingAudio()">
        <div class="pulse-ring"></div>
        <div class="pulse-ring-2"></div>
        <div class="avatar">
          <span class="material-symbols-outlined">calendar_month</span>
        </div>
      </div>
      <h2 class="agent-title">Agente de Reservas</h2>
      <p class="agent-subtitle">Tu asistente de citas profesional</p>
    </div>

    <!-- Question Display -->
    @if (currentQuestion() && !showCalendar()) {
      <div class="question-section">
        <div class="question-card">
          <div class="question-icon">
            <span class="material-symbols-outlined">record_voice_over</span>
          </div>
          <p class="question-text">{{ currentQuestion().question }}</p>
          <!-- Replay button -->
          <button
            class="replay-button"
            (click)="replayQuestion()"
            [disabled]="isPlayingAudio()">
            <span class="material-symbols-outlined">replay</span>
            Repetir
          </button>
        </div>
      </div>
    }

    <!-- Options -->
    @if (currentQuestion() && !showCalendar()) {
      <div class="options-section">
        <div class="options-grid">
          @for (option of currentQuestion().options; track option) {
            <button
              class="option-button"
              (click)="selectOption(option)"
              [disabled]="isPlayingAudio()">
              <span class="material-symbols-outlined">{{ option.icon }}</span>
              <span class="option-label">{{ option.label }}</span>
            </button>
          }
        </div>
      </div>
    }

    <!-- Calendar Placeholder -->
    @if (showCalendar()) {
      <div class="calendar-section">
        <div class="calendar-card">
          <h3>ðŸ“… Selecciona fecha y hora</h3>
          <p>AquÃ­ irÃ­a el calendario interactivo</p>
          <button class="primary-button" (click)="goBack()">
            Confirmar Cita
          </button>
        </div>
      </div>
    }

    <!-- Conversation History -->
    @if (conversationHistory().length > 0) {
      <div class="history-section">
        <h4>Resumen de la conversaciÃ³n</h4>
        @for (item of conversationHistory(); track item) {
          <div class="history-item">
            <p class="history-question">{{ item.question }}</p>
            <p class="history-answer">â†’ {{ item.answer }}</p>
          </div>
        }
      </div>
    }

    <!-- Home indicator -->
    <div class="home-indicator"></div>
  </div>
</div>
