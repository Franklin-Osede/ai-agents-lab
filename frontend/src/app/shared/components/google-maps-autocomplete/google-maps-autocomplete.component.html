<div class="google-maps-autocomplete">
  @if (label) {
    <label class="autocomplete-label" for="address-input">{{ label }}</label>
  }

  <div class="input-wrapper">
    <input
      #inputElement
      id="address-input"
      type="text"
      [value]="addressValue"
      [placeholder]="placeholder"
      class="autocomplete-input"
      (input)="onInputChange($any($event.target).value)"
      (focus)="onFocus()"
      (blur)="onBlur()"
      autocomplete="off"
      />

    <div class="input-icons">
      @if (isLoading) {
        <span class="material-symbols-outlined loading-icon">sync</span>
      }
      @if (!isLoading && addressValue) {
        <span
          class="material-symbols-outlined clear-icon"
          (click)="clear()"
          (keydown.enter)="clear()"
          tabindex="0"
          role="button"
          >close</span>
      }
      @if (!isLoading && !addressValue) {
        <span
        class="material-symbols-outlined search-icon">location_on</span>
      }
    </div>
  </div>

  <!-- Predictions Dropdown -->
  @if (showPredictions && predictions.length > 0) {
    <div class="predictions-container">
      @for (prediction of predictions; track prediction) {
        <div
          class="prediction-item"
          (mousedown)="selectPrediction(prediction)"
          (keydown.enter)="selectPrediction(prediction)"
          tabindex="0"
          role="option"
          aria-selected="false"
          >
          <span class="material-symbols-outlined prediction-icon">place</span>
          <div class="prediction-content">
            <div class="prediction-main-text">{{ prediction.structured_formatting.main_text }}</div>
            <div class="prediction-secondary-text">{{ prediction.structured_formatting.secondary_text }}</div>
          </div>
        </div>
      }
    </div>
  }

  <!-- Selected Place Info -->
  @if (selectedPlace && !showPredictions) {
    <div class="selected-place-info">
      <span class="material-symbols-outlined check-icon">check_circle</span>
      <span class="selected-address">{{ selectedPlace.formatted_address }}</span>
    </div>
  }
</div>
