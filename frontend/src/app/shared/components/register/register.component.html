<div class="register-container">
  <div class="register-card">
    <!-- Header -->
    <div class="register-header">
      <div class="logo-circle">
        <span class="material-symbols-outlined">person_add</span>
      </div>
      <h2 class="register-title">Crear Cuenta</h2>
      <p class="register-subtitle">Únete a MediConnect hoy</p>
    </div>

    <!-- Error Message -->
    @if (errorMessage) {
      <div class="error-message">
        <span class="material-symbols-outlined">error</span>
        <span>{{ errorMessage }}</span>
      </div>
    }

    <!-- Register Form -->
    <form (ngSubmit)="onSubmit()" class="register-form">
      <!-- Name Field -->
      <div class="form-group">
        <label for="name" class="form-label">
          <span class="material-symbols-outlined">badge</span>
          <span>Nombre Completo</span>
        </label>
        <input
          id="name"
          type="text"
          class="form-input"
          placeholder="Juan Pérez"
          [(ngModel)]="name"
          name="name"
          required
          autocomplete="name"
          />
      </div>

      <!-- Email Field -->
      <div class="form-group">
        <label for="email" class="form-label">
          <span class="material-symbols-outlined">mail</span>
          <span>Email</span>
        </label>
        <input
          id="email"
          type="email"
          class="form-input"
          placeholder="tu@email.com"
          [(ngModel)]="email"
          name="email"
          required
          autocomplete="email"
          />
      </div>

      <!-- Password Field -->
      <div class="form-group">
        <label for="password" class="form-label">
          <span class="material-symbols-outlined">lock</span>
          <span>Contraseña</span>
        </label>
        <input
          id="password"
          type="password"
          class="form-input"
          placeholder="Mínimo 6 caracteres"
          [(ngModel)]="password"
          name="password"
          required
          autocomplete="new-password"
          />
      </div>

      <!-- Confirm Password Field -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">
          <span class="material-symbols-outlined">lock_reset</span>
          <span>Confirmar Contraseña</span>
        </label>
        <input
          id="confirmPassword"
          type="password"
          class="form-input"
          placeholder="Repite tu contraseña"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          required
          autocomplete="new-password"
          />
      </div>

      <!-- Role Selection -->
      <fieldset class="form-group">
        <legend class="form-label">
          <span class="material-symbols-outlined">work</span>
          <span>Tipo de Cuenta</span>
        </legend>
        <div class="role-options">
          <label class="role-option" [class.selected]="role === 'client'">
            <input
              type="radio"
              name="role"
              value="client"
              [(ngModel)]="role"
              />
            <div class="role-content">
              <span class="material-symbols-outlined">person</span>
              <span class="role-text">Cliente</span>
            </div>
          </label>
          <label class="role-option" [class.selected]="role === 'professional'">
            <input
              type="radio"
              name="role"
              value="professional"
              [(ngModel)]="role"
              />
            <div class="role-content">
              <span class="material-symbols-outlined">medical_services</span>
              <span class="role-text">Profesional</span>
            </div>
          </label>
        </div>
      </fieldset>

      <!-- Terms Checkbox -->
      <div class="terms-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            [(ngModel)]="acceptTerms"
            name="acceptTerms"
            class="checkbox-input"
            />
          <span class="checkbox-text">
            Acepto los
            <a href="#" class="terms-link">términos y condiciones</a>
          </span>
        </label>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="submit-btn" [disabled]="isLoading">
        @if (!isLoading) {
          <span>Crear Cuenta</span>
        }
        @if (isLoading) {
          <span class="loading-spinner">
            <span class="spinner"></span>
            Creando cuenta...
          </span>
        }
      </button>
    </form>

    <!-- Divider -->
    <div class="divider">
      <span>o</span>
    </div>

    <!-- Google Sign-In Button -->
    <button type="button" (click)="onGoogleSignUp()" class="google-btn" [disabled]="isLoading">
      <svg class="google-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path>
        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path>
        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path>
        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path>
      </svg>
      <span>Registrarse con Google</span>
    </button>

    <!-- Login Link -->
    <div class="login-section">
      <p class="login-text">
        ¿Ya tienes cuenta?
        <button type="button" class="login-link" (click)="onSwitchToLogin()">
          Inicia sesión aquí
        </button>
      </p>
    </div>
  </div>
</div>
